<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jadeem Johnson â€” Digital Business Card</title>
  <meta name="description" content="Digital business card â€” Save or share my contact." />
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
  <style>
    /* ========== Basic layout & fonts ========== */
    :root{
      --bg1:#0f2027; --bg2:#203a43; --bg3:#2c5364; --accent:#00d4ff; --accent-2:#00aacc;
      --card-bg: rgba(255,255,255,0.08);
      --glass: blur(8px);
      --text:#ffffff;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      font-family:system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      margin:0;
      background:linear-gradient(135deg,var(--bg1),var(--bg2),var(--bg3));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
      color:var(--text);
    }

    /* ========== Card ========== */
    .card{
      width:100%;
      max-width:420px;
      background:var(--card-bg);
      border-radius:16px;
      padding:top 28px;
      text-align:center;
      box-shadow:0 12px 40px rgba(2,8,23,0.55);
      backdrop-filter:var(--glass);
      transform:translateY(26px);
      opacity:0;
      animation:fadeUp .9s cubic-bezier(.2,.9,.3,1) forwards;
      border: 1px solid rgba(255,255,255,0.06);
    }

    @keyframes fadeUp{
      to{transform:none; opacity:1}
    }

    /* ========== Avatar ========== */
    .avatar-wrap{
      display:inline-grid;
      place-items:center;
      width:128px;
      height:128px;
      margin:0 auto 16px;
      border-radius:50%;
      position:relative;
      overflow:visible;
    }
    .avatar{
      width:128px;height:128px;border-radius:50%;
      object-fit:cover;border:3px solid rgba(255,255,255,0.9);
      display:block;
      transform-origin:center;
      animation:pulse 3s ease-in-out infinite;
      box-shadow: 0 6px 22px rgba(2,8,23,0.5);
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.08));
    }
    @keyframes pulse{
      0%,100%{transform:scale(1)}
      50%{transform:scale(1.03); box-shadow:0 0 26px 6px rgba(0,212,255,0.08)}
    }
    .glow-ring{
      position:absolute; inset:-8px; border-radius:50%;
      background: radial-gradient(circle at 30% 20%, rgba(0,212,255,0.12), transparent 30%),
                  radial-gradient(circle at 70% 80%, rgba(0,212,255,0.05), transparent 40%);
      filter: blur(6px); pointer-events:none;
    }

    /* ========== Text ========== */
    h1{font-size:1.35rem; margin:6px 0 0; letter-spacing:0.2px}
    .title{color:rgba(255,255,255,0.82); margin:6px 0 12px; font-weight:500; font-size:0.98rem}
    .intro{color:rgba(255,255,255,0.75); font-size:0.92rem; margin-bottom:14px}

    /* ========== Contacts ========== */
    .contact-list{list-style:none; padding:0; margin:12px 0 18px; text-align:left}
    .contact-list li{
      display:flex; gap:10px; align-items:center; padding:8px 12px; border-radius:10px;
      transition:background .18s, transform .12s;
      color:rgba(255,255,255,0.95);
      margin-bottom:8px;
    }
    .contact-list li:hover{background:rgba(255,255,255,0.02); transform:translateY(-3px)}
    .icon{
      width:36px;height:36px;border-radius:8px; display:inline-grid; place-items:center;
      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.08));
      color:var(--accent); font-weight:700; flex:0 0 36px;
      border:1px solid rgba(255,255,255,0.03)
    }
    .meta{flex:1}
    .meta a{color:var(--accent); text-decoration:none; display:inline-block}
    .meta small{display:block;color:rgba(255,255,255,0.65); font-size:0.82rem; margin-top:2px}

    /* ========== Buttons ========== */
    .buttons{display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:6px}
    button.btn{
      border:0; padding:11px 18px; border-radius:999px; cursor:pointer; font-weight:700;
      background:linear-gradient(90deg,var(--accent),var(--accent-2));
      color:#03121a; transition:transform .14s ease, box-shadow .14s;
      display:inline-flex; gap:8px; align-items:center; justify-content:center;
      box-shadow: 0 6px 18px rgba(0,0,0,0.25);
    }
    button.btn.secondary{
      background:transparent; color:var(--accent); border:1px solid rgba(0,212,255,0.12);
    }
    button.btn:hover{transform:translateY(-4px); box-shadow:0 12px 30px rgba(0,0,0,0.35)}
    button.btn:active{transform:translateY(-1px) scale(.995)}
    .hint{font-size:0.82rem; color:rgba(255,255,255,0.64); margin-top:12px}

    /* ========== Responsive tweaks ========== */
    @media (max-width:420px){
      .card{padding:20px}
      .avatar{width:110px;height:110px}
    }

    /* ========== tiny toast ========== */
    .toast{
      position:fixed; left:50%; transform:translateX(-50%);
      bottom:26px; background:rgba(0,0,0,0.7); color:white;
      padding:10px 14px; border-radius:999px; font-size:0.95rem; display:none;
      box-shadow:0 8px 24px rgba(2,8,23,0.6);
    }
    .toast.show{display:block; animation:toastIn .28s ease}
    @keyframes toastIn{from{opacity:0; transform:translate(-50%,10px)} to{opacity:1; transform:translate(-50%,0)}}
  </style>
</head>
<body>
  <main class="card" role="region" aria-label="Digital business card">
    <div class="avatar-wrap" aria-hidden="false">
      <!-- Replace src with the path to your real photo (e.g. "me.jpg") -->
      <img class="avatar" src="profile.png",
        <svg>
          <defs>
            <linearGradient id='g' x1='0' x2='1' y1='0' y2='1'>
              <stop offset='0' stop-color='%2300d4ff'/>
              <stop offset='1' stop-color='%2300aacc'/>
            </linearGradient>
          </defs>
          <rect rx='0' width='100%25' height='100%25' fill='%230b1220'/>
          <g transform='translate(60,40)'>
            <circle cx='140' cy='120' r='110' fill='url(%23g)' opacity='0.12'/>
            <g transform='translate(50,20)'>
              <circle cx='100' cy='80' r='60' fill='%23ffffff' opacity='0.12'/>
              <rect x='0' y='160' rx='12' width='200' height='52' fill='%23ffffff' opacity='0.06'/>
            </g>
          </g>
        </svg>
      <div class="glow-ring" aria-hidden="true"></div>
    </div>

    <h1 id="fn">Jadeem Johnson</h1>
    <div class="title" id="title">HRMIS Manager</div>
    <div class="intro">Facilitating Digital Transformation</div>

    <ul class="contact-list" aria-label="contact details">
      <li>
        <div class="icon" aria-hidden="true">W</div>
        <div class="meta">
          <div><a id="workTelLink" href="tel:+1234567890">+1 (234) 567-890</a> <small>Work â€¢ ext <span id="workExt">123</span></small></div>
        </div>
      </li>

      <li>
        <div class="icon" aria-hidden="true">M</div>
        <div class="meta">
          <div><a id="cellTelLink" href="tel:+1987654321">+1 (987) 654-321</a></div>
          <small>Cell</small>
        </div>
      </li>

      <li>
        <div class="icon" aria-hidden="true">@</div>
        <div class="meta">
          <div><a id="emailLink" href="mailto:you@example.com">you@example.com</a></div>
          <small>Email</small>
        </div>
      </li>

      <li>
        <div class="icon" aria-hidden="true">âœ†</div>
        <div class="meta">
          <div><a id="waLink" href="https://wa.me/1987654321" target="_blank" rel="noopener noreferrer">WhatsApp chat</a></div>
          <small>WhatsApp</small>
        </div>
      </li>

      <li>
        <div class="icon" aria-hidden="true">ðŸ“·</div>
        <div class="meta">
          <div><a id="igLink" href="https://instagram.com/yourhandle" target="_blank" rel="noopener noreferrer">@yourhandle</a></div>
          <small>Instagram</small>
        </div>
      </li>
    </ul>

    <div class="buttons" role="group" aria-label="actions">
      <button id="saveContactBtn" class="btn" title="Save contact to your phone">Save Contact</button>
      <button id="shareContactBtn" class="btn secondary" title="Share contact (AirDrop, WhatsApp, etc.)">Share Contact</button>
    </div>

    <div class="hint"></div>
  </main>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    /***** === Edit these values with your real info === *****/
    const PROFILE = {
      givenName: "Jadeem",
      familyName: "Johnson",
      fullName: "Jadeem Johnson",
      title: "HRMIS Manager",
      org: "MoE - Region 1",
      workTel: "+18766181251",   // E.164 format
      workExt: "6041",
      cell: "+18762796809",      // E.164 format
      email: "jadeem.johnson@moey.gov.jm",
      whatsapp: "18762796809",   // country code + number (no +)
      instagram: "thatsjay876",
      photoFilename: "profile.jpg" // replace with file path if hosting a real image
    };
    /***** ============================================= *****/

    // Update visible links/text in page
    document.getElementById('fn').textContent = PROFILE.fullName;
    document.getElementById('title').textContent = PROFILE.title;
    document.getElementById('workTelLink').href = `tel:${PROFILE.workTel}`;
    document.getElementById('workTelLink').textContent = formatReadable(PROFILE.workTel);
    document.getElementById('workExt').textContent = PROFILE.workExt;
    document.getElementById('cellTelLink').href = `tel:${PROFILE.cell}`;
    document.getElementById('cellTelLink').textContent = formatReadable(PROFILE.cell);
    document.getElementById('emailLink').href = `mailto:${PROFILE.email}`;
    document.getElementById('emailLink').textContent = PROFILE.email;
    document.getElementById('waLink').href = `https://wa.me/${PROFILE.whatsapp}`;
    document.getElementById('igLink').href = `https://instagram.com/${PROFILE.instagram}`;
    document.getElementById('igLink').textContent = '@' + PROFILE.instagram;

    // If user replaced avatar file, update src (otherwise uses default SVG placeholder)
    (function setAvatarIfProvided(){
      if(PROFILE.photoFilename && PROFILE.photoFilename.trim() !== "" && PROFILE.photoFilename.indexOf("profile.jpg") === -1){
        const img = document.querySelector('.avatar');
        img.src = PROFILE.photoFilename;
      }
    })();

    // Helper: format E.164 number to +1876-123-4567 format
function formatReadable(e164){
  if(!e164) return "";
  // Remove any non-digit except '+'
  let cleaned = e164.replace(/[^+\d]/g, "");
  // Example assumes country code 1-876 and 7 local digits
  // Break into: +1 876 123 4567 â†’ +1876-123-4567
  return cleaned.replace(/^\+?(\d)(\d{3})(\d{3})(\d{4})$/, "+$1$2-$3-$4");
}

    // Build vCard string (VCARD 3.0 compatible)
    function buildVCard(){
      // N: Family;Given
      const v = [
        "BEGIN:VCARD",
        "VERSION:3.0",
        `N:${escapeV(PROFILE.familyName || "")};${escapeV(PROFILE.givenName || "")};;;`,
        `FN:${escapeV(PROFILE.fullName)}`,
        PROFILE.title ? `TITLE:${escapeV(PROFILE.title)}` : "",
        PROFILE.org ? `ORG:${escapeV(PROFILE.org)}` : "",
        PROFILE.workTel ? `TEL;TYPE=WORK,VOICE:${PROFILE.workTel}` : "",
        PROFILE.workExt ? `X-WORK-EXT:${PROFILE.workExt}` : "",
        PROFILE.cell ? `TEL;TYPE=CELL,VOICE:${PROFILE.cell}` : "",
        PROFILE.email ? `EMAIL;TYPE=INTERNET:${PROFILE.email}` : "",
        PROFILE.instagram ? `URL:https://instagram.com/${PROFILE.instagram}` : "",
        PROFILE.whatsapp ? `X-SOCIALPROFILE;TYPE=WhatsApp:https://wa.me/${PROFILE.whatsapp}` : "",
        "END:VCARD"
      ].filter(Boolean).join("\r\n");
      return v;
    }

    function escapeV(s){
      return String(s || "").replace(/[,;\\]/g, function(m){ return "\\"+m });
    }

    // Create blob and file
    function vCardBlob(){
      const vc = buildVCard();
      return new Blob([vc], { type: "text/vcard;charset=utf-8" });
    }

    /* ===== Save Contact (download .vcf) =====
       Works well on desktop and on mobile:
       - On iOS Safari: using a.target=_self generally triggers Add to Contacts
       - On Android Chrome: tap triggers download & Contacts app offers import
    */
    document.getElementById('saveContactBtn').addEventListener('click', function(){
      const blob = vCardBlob();
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `${PROFILE.fullName.replace(/\s+/g,'_') || 'contact'}.vcf`;
      // setting target=_self helps iOS Safari open the file in Contacts instead of Files
      a.target = '_self';
      // append & click
      document.body.appendChild(a);
      a.click();
      // cleanup
      setTimeout(()=> { URL.revokeObjectURL(url); try{ a.remove() }catch(e){} }, 1200);
    });

    /* ===== Share Contact (native share sheet) ===== */
    document.getElementById('shareContactBtn').addEventListener('click', async function(){
      const blob = vCardBlob();
      const filename = `${PROFILE.fullName.replace(/\s+/g,'_') || 'contact'}.vcf`;

      // Modern Share with files (most recent mobile browsers)
      if(navigator.canShare && navigator.canShare({ files: [new File([blob], filename, { type: blob.type })] })){
        try {
          await navigator.share({
            files: [ new File([blob], filename, { type: blob.type }) ],
            title: PROFILE.fullName,
            text: `${PROFILE.fullName} â€” ${PROFILE.title}`
          });
          showToast('Shared successfully âœ…');
          return;
        } catch (err) {
          // user cancelled or failed
          showToast('Share canceled or failed.');
          return;
        }
      }

      // Fallback 1: navigator.share without files (pack text + link)
      if(navigator.share){
        try {
          await navigator.share({
            title: PROFILE.fullName,
            text: `${PROFILE.fullName}\n${PROFILE.title}\nEmail: ${PROFILE.email}\nPhone: ${PROFILE.cell}\nInstagram: https://instagram.com/${PROFILE.instagram}`
          });
          showToast('Shared successfully âœ…');
          return;
        } catch (err){
          // continue to next fallback
        }
      }

      // Fallback 2: Copy vCard text to clipboard (user can paste into message)
      const vcText = buildVCard();
      if(navigator.clipboard && navigator.clipboard.writeText){
        try {
          await navigator.clipboard.writeText(vcText);
          showToast('vCard text copied to clipboard â€” paste it in a message to share.');
          return;
        } catch (err){
          // continue to next
        }
      }

      // Final fallback: download the .vcf and instruct user to share file manually
      showToast('Sharing not supported. The contact will be downloaded instead.');
      // trigger a download
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = filename; a.target = '_self';
      document.body.appendChild(a); a.click();
      setTimeout(()=> { URL.revokeObjectURL(url); try{ a.remove() }catch(e){} }, 1200);
    });

    /* ===== Tiny toast helper ===== */
    const toastEl = document.getElementById('toast');
    let toastTimer = 0;
    function showToast(msg, time=2600){
      clearTimeout(toastTimer);
      toastEl.textContent = msg;
      toastEl.classList.add('show');
      toastTimer = setTimeout(()=> toastEl.classList.remove('show'), time);
    }

    // Accessibility: Press Enter on focused buttons works naturally; ensure keyboard focus styles
    (function addFocusStyles(){
      const css = document.createElement('style');
      css.innerHTML = "button:focus{outline:3px solid rgba(0,212,255,0.18); outline-offset:4px}";
      document.head.appendChild(css);
    })();

    // IMPORTANT: If you host this page, use HTTPS for the best Share API behavior.
    // Done âœ…
  </script>
</body>
</html>
